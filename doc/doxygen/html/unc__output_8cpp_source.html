
<!-- quan_doxygen_header.html -->
<!-- From Sample custom Doxygen header from my_doxygen_header.html  -->-
<!-- Copyright 1998 - 2012 Paul A. Bristow. -->
<!-- Distributed under the Boost Software License, Version 1.0. -->
<!-- (See accompanying file LICENSE_1_0.txt or copy at          -->
<!-- http://www.boost.org/LICENSE_1_0.txt)                      -->
<html> <!-- </html> is in footer. -->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
  <!-- Add your title here ! -->
  <title>Boost.quan Wed Aug 29 2012 16:29:25 Boost.Quan </title>
  <!-- Add your custom stylesheet here ! -->
  <link href="../quan_doxygen.css" rel="stylesheet" type="text/css"/>
  <!-- Note that this overrides any stylesheet specified in doxyfile setting HTML_STYLESHEET="mystylesheet.css" ! -->
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
</head>
<!-- Add draft background here if, for example, not yet accepted or otherwise not finalised. -->
<body style="background-image: url(../../images/draft.png);">
</body>
<!-- You could also flag status by using a color? -->
<!--<body style="background-image: url(../../images/draft.png) ; color : darkblue"> -->
<!-- </body> is in footer. -->
<!-- Add your logo here or -->
<!-- Boost logo here if accepted after review, else some "Proposed for Boost" logo, for example the one below, or "proposed for Boost" ! -->
<table cellpadding="5" width="100%">
  <tbody>
    <tr>
      <td valign="top"><img alt="Proposed for Boost." src="../proposed_for_boost.png" height="80" width="250"/></td>
    </tr>
  </tbody>
</table>
<p>
  <br/>  <!-- Some space below logo, if needed. -->
</p>
<!-- Generated by Doxygen 1.8.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737fe0457d95dc419274e8bf895638da.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">unc_output.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="unc__output_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// Copyright Paul A. Bristow 2009, 2012.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// Use, modification and distribution are subject to the</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// Boost Software License, Version 1.0.</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// (See accompanying file LICENSE_1_0.txt</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// or copy at http://www.boost.org/LICENSE_1_0.txt)</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="unc_8hpp.html" title="Class for simple Propagation of Uncertainties according to a pure Gaussian model.">boost/quan/unc.hpp</a>&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;boost/math/special_functions/fpclassify.hpp&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="comment">//using boost::math::isnan;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="comment">//using boost::math::isinf;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">//using boost::math::isfinite;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="comment">//using boost::math::isnormal; // isfinite and not denormalised.</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;boost/math/special_functions/sign.hpp&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; <span class="comment">// using boost::math::signbit;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; <span class="comment">// using boost::math::sign;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; <span class="comment">// using boost::math::copysign;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// Restore ios fill and precision, and set width to zero, as if used.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;ostream&gt;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; <span class="comment">// using std::stringstream;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="code" href="unc__output_8cpp.html#a02111935d5c201d33ab48cb892c9a202">   66</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="unc__output_8cpp.html#a02111935d5c201d33ab48cb892c9a202" title="Output to stream given value as a decimal digit string, rounding properly using the uncertainty infor...">unc_output</a>(</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                    <span class="keywordtype">double</span> value, <span class="comment">// Mean or most likely value.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                    <span class="keywordtype">float</span> stdDev, <span class="comment">// Standard deviation.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> degFree, <span class="comment">// Degrees of freedom -1.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> uncTypes, <span class="comment">// 16 Uncertain type flags.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                    std::ostream&amp; os = std::cout)  <span class="comment">// Output stream.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;{</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keyword">using</span> boost::math::isnan;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keyword">using</span> boost::math::isfinite;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keyword">using</span> std::setprecision;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keyword">using</span> std::setw;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keyword">using</span> std::resetiosflags;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keyword">using</span> std::istream;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keyword">using</span> std::ostream;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keyword">using</span> std::ios_base;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keyword">using</span> std::char_traits;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keyword">using</span> std::cout;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keyword">using</span> std::cerr;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keyword">using</span> std::cin;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keyword">using</span> std::endl;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keyword">using</span> std::flush;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keyword">using</span> std::ws;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keyword">using</span> std::streamsize;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keyword">using</span> std::boolalpha;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keyword">using</span> std::dec;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keyword">using</span> std::hex;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keyword">using</span> std::showbase;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keyword">using</span> std::fixed;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keyword">using</span> std::scientific;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keyword">using</span> std::right;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keyword">using</span> std::showpos;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keyword">using</span> std::noshowpos;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keyword">using</span> std::noshowbase;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keyword">using</span> std::noshowpoint;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keyword">using</span> std::showpoint;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keyword">using</span> <a class="code" href="namespacestd.html#ae15a9ca06b52541660bcb71a0a269bfa">std::noadjust</a>;  <span class="comment">// Restore to default state.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keyword">using</span> <a class="code" href="namespacestd.html#a3841d123b372d972822b7f9a6e4b16d3">std::nofixed</a>;  <span class="comment">// Restore to default state.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keyword">using</span> <a class="code" href="namespacestd.html#a96b3585058e7864673d30f2f1f1caf05">std::noscientific</a>;  <span class="comment">// Restore to default state.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keyword">using</span> std::defaultfloat; <span class="comment">// Restore fixed &amp; scientific to default state.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keyword">using</span> <a class="code" href="namespacestd.html#a96f4befe4e5f57c5bdf4e854e054a392">std::hexbase</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keyword">using</span> <a class="code" href="namespacestd.html#acfee8e9f1482d896e120d12fa01412b6">std::lowercase</a>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// Check iwords are setup correctly.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">if</span> ((os.iword(<a class="code" href="unc__init_8hpp.html#a357cabd77dda683e78113f19c75869e6">zeroIndex</a>) != <a class="code" href="unc__init_8hpp.html#a34fc33a216bcb331ef4eb2c42b27f757">indexID</a>) || (os.iword(<a class="code" href="unc__init_8hpp.html#a8af718bd2e2db69efcec51e53e5271ae">topIndex</a>) != <a class="code" href="unc__init_8hpp.html#a34fc33a216bcb331ef4eb2c42b27f757">indexID</a>))</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  { <span class="comment">// iwords are corrupt!</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;\n!!! unc_output: &quot;</span> <span class="stringliteral">&quot;iword corrupt!&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="unc_8hpp.html#a9a86dfe3fd8645366d8c70e03f72079e">outUncValues</a>(os, cerr);  <span class="comment">// Log all the iword values to cerr.</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    os &lt;&lt; <span class="stringliteral">&quot;?????&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">throw</span> std::bad_alloc(); <span class="comment">// Or which other exception?</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// This means the setUNcDefaults(os) has not been called for the stream os!</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">// int notOK might be better?</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// References to os.iword()</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordtype">long</span>&amp; uncWidth = os.iword(<a class="code" href="unc__init_8hpp.html#a7edb6c5c7929c3cde8986c34985cd884">uncWidthIndex</a>); <span class="comment">// Width required for uncertain value.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordtype">long</span>&amp; oldUncWidth = os.iword(<a class="code" href="unc__init_8hpp.html#a2f717b53e4fd4597bdd77c07ca244a99">oldUncWidthIndex</a>); <span class="comment">// Width required for previous uncertain value.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordtype">long</span>&amp; uncFlags = os.iword(<a class="code" href="unc__init_8hpp.html#ae232442bb418cece56776b8b0374886a">uncFlagsIndex</a>); <span class="comment">//  </span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordtype">long</span>&amp; Width = os.iword(<a class="code" href="unc__init_8hpp.html#a1c4c5f08d07a9620c0ccaecbad7fc5e5">widthIndex</a>); <span class="comment">// Width specified by setw(99).</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordtype">long</span>&amp; oldWidth = os.iword(<a class="code" href="unc__init_8hpp.html#aeda4132edac06ff70500b995e99d3b88">oldWidthIndex</a>); <span class="comment">// width previously specified by setw(99)</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordtype">long</span>&amp; <a class="code" href="classset_sig_digits.html">setSigDigits</a> = os.iword(<a class="code" href="unc__init_8hpp.html#a5bdd59e34e6312280d6cc7c813e7eb97">setSigDigitsIndex</a>); <span class="comment">// Specified number of digits to use for value.</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordtype">long</span>&amp; setStdDevSigDigits = os.iword(<a class="code" href="unc__init_8cpp.html#ad8d7e08b29b1b9115ca42d01db02761a">stdDevSigDigitsIndex</a>); <span class="comment">// Specified number of digits to use for sd.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordtype">long</span>&amp; <a class="code" href="classset_scale.html">setScale</a> = os.iword(<a class="code" href="unc__init_8hpp.html#a95cc4c31f8f7ed8a30939130f9ee84a3">setScaleIndex</a>); <span class="comment">// Scale factor, stored by `&lt;&lt; setScale(6)`</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// Only actually scale multiple, if also request to set scale with `out &lt;&lt; setscale ...`</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">// bools showing output requirements specified using unc additional ostream manipulators.</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// Note that these bools are NOT initialised here,</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="comment">// assuming compiler will warn if used before being initialised.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">    \var bool isNoisyDigit</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">    \brief Add an extra &#39;noisy&#39; guard digit to reduce risk of information loss.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordtype">bool</span> isNoisyDigit; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordtype">bool</span> isPlusMinus;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordtype">bool</span> isSetScale; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordtype">bool</span> isAutoScale; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordtype">bool</span> isUppercase; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordtype">bool</span> isScientificFormat;  </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordtype">bool</span> isShowPoint;  </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordtype">bool</span> isShowPos; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordtype">bool</span> isFixed; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordtype">bool</span> isWidthSet; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordtype">bool</span> isNoAdjust;  </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordtype">bool</span> isRightJustify; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordtype">bool</span> isLeftJustify; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordtype">bool</span> isInternalJustify;  </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordtype">bool</span> isCenter; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordtype">bool</span> isAlign; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// bools showing state of arguments value, stdDev, df.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="comment">// Note that these bools are NOT initialised here,</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="comment">// assuming the compiler will warn if use before initialized.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">// They all need to be &#39;global&#39; to `unc_output`.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordtype">bool</span> isValueExact = <span class="keyword">false</span>; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordtype">bool</span> isValueInteger = <span class="keyword">false</span>; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordtype">bool</span> isUncKnown = <span class="keyword">false</span>; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordtype">bool</span> isValueNaN = <span class="keyword">false</span>; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordtype">bool</span> isValueInfinite = <span class="keyword">false</span>; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordtype">bool</span> isValueNegative  = <span class="keyword">false</span>; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordtype">bool</span> isValueZero = <span class="keyword">false</span>; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordtype">bool</span> isValueNearZero = <span class="keyword">false</span>; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordtype">bool</span> isValueTooBigforUnc = <span class="keyword">false</span>;  </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordtype">bool</span> isValueTooBigforSI = <span class="keyword">false</span>;  </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordtype">bool</span> isValueZeroFractional = <span class="keyword">false</span>; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordtype">bool</span> isStdDevNaN = <span class="keyword">false</span>; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordtype">bool</span> isStdDevInf = <span class="keyword">false</span>; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">//int sigDigits = std::numeric_limits&lt;double&gt;::max_digits10; // Default significant digits for value.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// Show all potentially significant?</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordtype">int</span> sigDigits = 6; <span class="comment">// Default significant digits for value.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">// For non-zero: 3 means ddd0. or ddd. or dd.d or d.dd or d.dd or 0.ddd or 0.0ddd ...</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// For zero, sigDigits = 1 means just 0, 2 means 0.0, 3 means 0.00 ...</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// If sigDigits &lt; 0 means significant digits is undefined.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordtype">int</span> stdDevSigDigits = 1;  <span class="comment">// Default significant digits for stdDev.</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#ifdef UNC_TRACE</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor"></span>  { <span class="comment">// Log the unc_output arguments:</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    std::cerr &lt;&lt; <span class="stringliteral">&quot;\n  &lt;&lt;&lt; unc_output: &quot;</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      &lt;&lt; setprecision(2 + std::numeric_limits&lt;double&gt;::digits * 3010/10000) <span class="comment">// aka max_digits10</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      &lt;&lt; value <span class="comment">// scientific if necessary.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;, stdDev &quot;</span> &lt;&lt; stdDev</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;, df &quot;</span> &lt;&lt; degFree</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// and log the info from the unc iwords:</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="unc_8hpp.html#ad12137d63076c361068e8a78fc69aa39">outUncFlags</a>(uncFlags, std::cerr);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    std::cerr &lt;&lt; <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="unc_8hpp.html#a60103b79b2bd1aa73fff30a75e2f1fbd">outUncTypes</a>(uncTypes, std::cerr);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="unc_8hpp.html#a9a86dfe3fd8645366d8c70e03f72079e">outUncValues</a>(os, std::cerr);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor"></span>  <span class="comment">//const int savedUncFlags = uncFlags; // Save to restore.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">//const int savedUncWidth = os.iword(uncWidthIndex); // Save to restore.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">// Why restore? - passed by value, so can alter if want to.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="comment">// Width, precision, flags &amp; fillChar data from stream os. ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  streamsize iosWidth = os.width(); </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="comment">// which would reset width back to zero!</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="comment">// &amp; prevent any ios formatting during os &lt;&lt; ...</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">// because unc_output does all its own formatting.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  isWidthSet = (iosWidth &gt; 0); <span class="comment">// For example by os &lt;&lt; setw(99)</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">// Fixed width field suits tables.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="comment">// For example: os &lt;&lt; setw(10) means fit into a width of 10, with padding if necessary.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">// stream width &lt;= 0 means no justification or padding.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="comment">// Since default width = 0 after each item output so ostream,</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="comment">// defaults to flex format, suitable for flexible non-tabulated layout.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keyword">const</span> std::streamsize iosPrecision = os.precision();</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="comment">// Number of significant decimal digits prescribed by \c setprecision(int), Default is 6.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> iosFillChar = os.fill(); <span class="comment">// Default is a space.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// Save format flags from \c ostream, so can restore on exit, and set \c ios default values.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> iosFlags = os.flags();  <span class="comment">// Save fmtflagsin case need to restore.</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  os.width(0); <span class="comment">// Would be zeroed by any previous use like &lt;&lt; avalue ...</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  os.flags(ios_base::dec | ios_base::skipws); <span class="comment">// All other format flags are zero (cleared bits).</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="comment">// Leaving fill and precision as on entry.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor">#ifdef UNC_TRACE</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="preprocessor"></span>  { <span class="comment">// Log ios fillchar, precision &amp; width.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// fill char set by \c os.fill(&#39;~&#39;); or \c &lt;&lt; \c setfill(&#39;~&#39;)</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">// precision by \c &lt;&lt; setprecision(10)  or cout.precision(10),</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// width by \c setw(10) or \c cout.width(10)</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    std::cerr &lt;&lt;  <span class="stringliteral">&quot;  IOstream: &quot;</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="stringliteral">&quot;fill char &quot;</span> &lt;&lt; hex &lt;&lt; showbase</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      &lt;&lt; int(iosFillChar) &lt;&lt; <a class="code" href="xiostream_8hpp.html#aa4d535a2920e5dc493478fc76c5bead0">space</a></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      &lt;&lt; <span class="charliteral">&#39;\&#39;&#39;</span> &lt;&lt; iosFillChar&lt;&lt; <span class="charliteral">&#39;\&#39;&#39;</span>&lt;&lt; dec</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;, precision &quot;</span> &lt;&lt; iosPrecision &lt;&lt; <span class="stringliteral">&quot;, width &quot;</span> &lt;&lt; iosWidth &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      &lt;&lt; std::endl;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    std::cerr &lt;&lt; <span class="stringliteral">&quot;  &quot;</span>; <a class="code" href="xiostream_8hpp.html#a46d3754822ec1110c707a858aeeba361">outFmtFlags</a>(os.flags(), std::cerr, <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    std::cerr &lt;&lt; <span class="stringliteral">&quot;  &quot;</span>; <a class="code" href="xiostream_8hpp.html#ad09ef6f99a1d6683208d9ced3618da1f">outIOstates</a>(os.rdstate(), std::cerr, <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  } <span class="comment">// trace</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">// Get print format requirements from std::ios flags. ****************************</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  isUppercase = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(iosFlags &amp; ios_base::uppercase); <span class="comment">// E not e.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="comment">// TODO No mechanism to change uppercase at present in round_* functions.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  isScientificFormat = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(iosFlags &amp; ios_base::scientific); <span class="comment">// exp format wanted.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  isFixed = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(iosFlags &amp; ios_base::fixed); <span class="comment">// `&lt;&lt; fixed` Fixed format wanted.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// means d.dddd format wanted, if possible, rather than scientific or exp format.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  isNoAdjust = !<span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(iosFlags &amp; ios_base::adjustfield); <span class="comment">// `&lt;&lt; noadjust`</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// no adjustfield flags are set (default, and == &lt;&lt; right - a waste!).</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  isLeftJustify = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(iosFlags &amp; ios_base::left);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// left justify, append trailing padding with fillchar after.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  isRightJustify = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(iosFlags &amp; ios_base::right);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="comment">// right justify, prepend leading padding with fillchar before.</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  isInternalJustify = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(iosFlags &amp; ios_base::internal);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="comment">// IO streams use to output fill char between sign and 1st digit.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// And meaning of more than one bit is specially defined for unc_output:</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  isCenter = isLeftJustify &amp;&amp; isRightJustify;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// center if BOTH left and right ios specified.</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">// Done with ` &lt;&lt; ` center rather than `&lt;&lt; left &lt;&lt; right ... `.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  isAlign = isInternalJustify &amp;&amp; isLeftJustify &amp;&amp; isRightJustify;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// Align decimal point with previous value?</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  isShowPoint = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(iosFlags &amp; ios_base::showpoint);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">// Means decimal point is always shown, for example 900. even if not needed.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  isShowPos = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(iosFlags &amp; ios_base::showpos);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">// Show + sign always.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// Get print format requirements from unc flags. </span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  isNoisyDigit = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(uncFlags &amp; <a class="code" href="unc_8hpp.html#a68335ca359c326cfad799912892984fdab5a6082eb1bac1b504465d874da18664">noisyDigit</a>); <span class="comment">// `&lt;&lt; addNoisyDigit`</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  isPlusMinus = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(uncFlags &amp; <a class="code" href="unc_8hpp.html#a68335ca359c326cfad799912892984fda8df10473f985e1e141fe13ce1da4b2e7">plusMinus</a>); <span class="comment">// `&lt;&lt; plusminus`</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// Uncertainty as +/- is required too (but ignore if integer).</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  isSetScale = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(uncFlags &amp; <a class="code" href="unc_8hpp.html#a68335ca359c326cfad799912892984fda4f01a573a3bde4134360c61b86e0deb9">setScaled</a>); <span class="comment">// scale by specified factor.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="comment">// Signals need to use stored SI multiple symbol like M, k, or prefix like kilo,</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="comment">// for example: scale == 2 for c, 3 for k, 6 for M, -3 for m,</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="unc_8hpp.html#abaaec208ad54a7a3e8079fa3b8761139" title="To use value set with setScale(int)">scale</a> = (isSetScale) ? os.iword(<a class="code" href="unc__init_8hpp.html#a95cc4c31f8f7ed8a30939130f9ee84a3">setScaleIndex</a>) : 0;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// If setscale then scale by SI multiple saved by SetScale(int).</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordtype">int</span> exponent = 0; <span class="comment">// To hold calculated 10 ^ exponent.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordtype">size_t</span> used = 0; <span class="comment">// Count of chars actually output to stream os.</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor">#ifdef UNC_TRACE</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor"></span>  { <span class="comment">// Log display options.</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   std:: cerr &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> <span class="stringliteral">&quot;Display: &quot;</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      &lt;&lt; (isPlusMinus ? <span class="stringliteral">&quot;+/- &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      &lt;&lt; (isUppercase ? <span class="stringliteral">&quot;upper &quot;</span> : <span class="stringliteral">&quot;lower &quot;</span>)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      &lt;&lt; (isScientificFormat ? <span class="stringliteral">&quot;expFormat &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      &lt;&lt; (isWidthSet ? <span class="stringliteral">&quot;set_width&quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      &lt;&lt; (isFixed ? <span class="stringliteral">&quot;fix &quot;</span> : <span class="stringliteral">&quot; &quot;</span>)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      &lt;&lt; (isNoAdjust ? <span class="stringliteral">&quot;no_adjust &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      &lt;&lt; (isLeftJustify  ? <span class="stringliteral">&quot;left &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      &lt;&lt; (isRightJustify ? <span class="stringliteral">&quot;right &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      &lt;&lt; (isInternalJustify ? <span class="stringliteral">&quot;internal &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      &lt;&lt; (isCenter ? <span class="stringliteral">&quot;center &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      &lt;&lt; (isAlign ? <span class="stringliteral">&quot;align &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      &lt;&lt; (isShowPos ? <span class="stringliteral">&quot;show_+ &quot;</span> : <span class="stringliteral">&quot;&quot;</span> )</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      &lt;&lt; (isShowPoint ? <span class="stringliteral">&quot;show_. &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      &lt;&lt; std::endl;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  } <span class="comment">// trace</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="comment">// Check value, stdDev &amp; unc types for finite, zero, integer, exact. @@@@@@@@@@@@@@@@@@@@@@@@@@@@</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="comment">// Check value features first.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> savedValue = value;  <span class="comment">// Save in case need original (signed &amp; unscaled).</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  isValueInteger = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(uncTypes &amp; <a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387a4dbdbb9f0703c560765df0b495e2e08e" title="Exact integer 2,3,4 ... may not be possible to store int into double?">VALUE_INTEGER</a>); <span class="comment">// Explicitly flagged as integer.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  isValueExact = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    (( ((uncTypes &amp; (<a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387a10120ed09bb2013a9640635f2a799fbc" title="Uncertainty can only be &lt; value, + = zero.">UNC_NOPLUS</a> | <a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387a5d47c395882673b486113eb7de38a73f">UNC_NOMINUS</a>)) == (<a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387a10120ed09bb2013a9640635f2a799fbc" title="Uncertainty can only be &lt; value, + = zero.">UNC_NOPLUS</a> | <a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387a5d47c395882673b486113eb7de38a73f">UNC_NOMINUS</a>))<span class="comment">// Both NOPLUS &amp; NOMINUS bits set == 1,</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    || (uncTypes &amp; <a class="code" href="unc_8hpp.html#a886bb517d4f002810556894e0f4536da" title="Both set.">VALUE_EXACT</a>) == <a class="code" href="unc_8hpp.html#a886bb517d4f002810556894e0f4536da" title="Both set.">VALUE_EXACT</a>) <span class="comment">// or flagged as exact VALUE_EXACT, like 2.54</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    || ((uncTypes &amp; (<a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387a4dbdbb9f0703c560765df0b495e2e08e" title="Exact integer 2,3,4 ... may not be possible to store int into double?">VALUE_INTEGER</a> | <a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387af56de87cd01d5725c429f2fc72f855da">VALUE_RATIONAL</a>)) != 0) );  <span class="comment">// Both integers (99) &amp; rationals (22/7) are implicitly exact,</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="comment">// But zero values, for example 0.000 (implicitly +/- 0.0005) or 0. +/- 0.05f</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="comment">// are NOT exact (nor integer), unless stdDev = 0.f, or integer constructed from &quot;0&quot;.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">if</span> (isValueExact)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  { <span class="comment">// By convention, uncTypes take precedence over any value of stdDev.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">// But should also cross-check if VALUE_EXACT and stdDev != 0.f</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    stdDev = 0.f; <span class="comment">// Ensuring it is finite in test below.</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    degFree = (<span class="keywordtype">unsigned</span> short)0;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">// By convention, exact values have 1 reading &amp; so degfree == 0</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (isValueInteger)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    { <span class="comment">// No +/- because is integer, even if requested y &lt;&lt; plusminus.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      isPlusMinus = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    } <span class="comment">//</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  } <span class="comment">// isValueExact</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">// Check if value is finite.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordflow">if</span> (!isfinite(static_cast&lt;double&gt;(value)))</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  { <span class="comment">// (value == NaN) || (value == SNaN) || (value == INFINITY)</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> (isnan(value))</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    { <span class="comment">// NaN</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      isValueNaN = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      isValueNegative = <span class="keyword">false</span>; <span class="comment">// By convention, only positive zero and positive NaNs.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    { <span class="comment">// If not NaN then assume  + or - infinity.</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      isValueInfinite = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      isValueNaN = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="comment">// Unlike zero and NaN, can have negative infinity.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    } <span class="comment">// isNaN?</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    isValueZero = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    isValueExact = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    isUncKnown = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  } <span class="comment">// value not finite.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  { <span class="comment">// value IS finite, so can test if value is negative or zero, too big or too small.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    isValueInfinite = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    isValueNaN = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    isValueZero = (0. == value);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> (isValueZero)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    { <span class="comment">// Keep display of zero value simple (&amp; avoid risk of divide by zero!).</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      isValueNegative = <span class="keyword">false</span>; <span class="comment">// By convention, only +0 and +NaNs.</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      isValueNearZero = <span class="keyword">true</span>; <span class="comment">// Use to avoid relative std deviation.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      isScientificFormat = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      exponent = 0;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }  <span class="comment">// is ZeroValue.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">if</span> (value &lt; 0.)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    { <span class="comment">// is Negative (OK to use &lt; 0. test here because have already eliminated NaN and inf).</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      isValueNegative = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      value = fabs(value); <span class="comment">// Can now ignore effect of negativeness, adding sign for output.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }  <span class="comment">// value &lt; 0.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    isValueNearZero = (value &lt; numeric_limits&lt;double&gt;::min() * 10.);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// May cause divide-by-zero trouble if use relative std deviation.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  } <span class="comment">// value zero, finite, NaN, outsize tests.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// Check on features of stdDev.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  isUncKnown = uncTypes &amp;&amp; <a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387a3468dd60340b5a8782fcb9e9ac211eec" title="Uncertainty known (but if not, value may still be known OK).">UNC_KNOWN</a>; <span class="comment">// Uncertainty is flagged as KNOWN from uncType,</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="comment">// (but still need to check that stdDev is finite).</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">if</span> (!isfinite(stdDev))</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  { <span class="comment">// stdDev is NaN or infinity.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    isValueInteger = <span class="keyword">false</span>; <span class="comment">// ???</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    isValueExact = <span class="keyword">false</span>; <span class="comment">// Uncertainty must be zero for exact, sp can&#39;t be exact if uncertainty is undefined, .</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    uncTypes &amp;= ~(UNC_KNOWN | <a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387a10120ed09bb2013a9640635f2a799fbc" title="Uncertainty can only be &lt; value, + = zero.">UNC_NOPLUS</a> | <a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387a5d47c395882673b486113eb7de38a73f">UNC_NOMINUS</a> | <a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387ad390fdd921c136180ceb271f498f450b" title="Quantised by least significant decimal digit.">UNC_QUAN_DECIMAL</a> | <a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387a4cf174c7d02ea9c53ef092e7eff71f6d" title="Quantised by least significant binary digit.">UNC_QUAN_BINARY</a> | <a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387a93554056759edc80e835e2c3d9d7a097" title="Uncertainty has rectangular or uniform probability distribution.">UNC_UNIFORM</a> | <a class="code" href="unc_8hpp.html#a4bfdeee65812d9cc73f9ee7c4c1ca387af426cf32f3cbb354af02e42c2685e7a0">UNC_TRIANGULAR</a>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="comment">// and clear many bits for unc_types which cannot be correct.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    isUncKnown = <span class="keyword">false</span>; <span class="comment">// Despite uncType flag UNC_KNOWN.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (isnan(stdDev))</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      isStdDevNaN = <span class="keyword">true</span>; <span class="comment">// (So uncertainty undefined)</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="comment">// but value is OK, so leave the value as is.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">else</span> <span class="comment">// If stdDev not NaN then assume stdDev is infinite (+ or -).</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    { <span class="comment">// If stdDev == infinity, then, by convention, value == NaN.</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      value = numeric_limits&lt;double&gt;::quiet_NaN(); <span class="comment">// So the value becomes undefined too.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      isValueNaN = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      isStdDevInf = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    } <span class="comment">// stdDev is NaN or infinity.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  } <span class="comment">// stdDev NOT finite.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  { <span class="comment">// stdDev is finite (normal case).</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    isStdDevInf = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    isStdDevNaN = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    isUncKnown = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">if</span> ((0.f == stdDev) &amp;&amp; isUncKnown)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    { <span class="comment">// stdDev is finite zero (&amp; uncertainty is known) so</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      isValueExact = <span class="keyword">true</span>; <span class="comment">// value explicitly exact.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="preprocessor">#ifdef UNC_TRACE</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="preprocessor"></span>        {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;          std::cerr &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> <span class="stringliteral">&quot;StdDev exact value &quot;</span>&lt;&lt; value;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        } <span class="comment">// trace</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="preprocessor"></span>    } <span class="comment">// stddev finite</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    { <span class="comment">// stdDev != 0, so value cannot be exact.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      isValueExact = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  } <span class="comment">// End checks on stdDev.</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="preprocessor">#ifdef UNC_TRACE</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="preprocessor"></span>  { <span class="comment">// Show output settings.</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    std::cerr</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> <span class="stringliteral">&quot;Output Settings: &quot;</span> &lt;&lt; boolalpha &lt;&lt; dec</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      &lt;&lt; (isWidthSet ? <span class="stringliteral">&quot;width is set, &quot;</span> : <span class="stringliteral">&quot;no width set, &quot;</span>)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      &lt;&lt; (isPlusMinus ? <span class="stringliteral">&quot; +/- &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      &lt;&lt; (isUppercase ? <span class="stringliteral">&quot;upper &quot;</span> : <span class="stringliteral">&quot;lower &quot;</span>)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      &lt;&lt; (isScientificFormat ? <span class="stringliteral">&quot;expFormat &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      &lt;&lt; (isFixed ? <span class="stringliteral">&quot;fix &quot;</span> : <span class="stringliteral">&quot; &quot;</span>)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      &lt;&lt; (isLeftJustify  ? <span class="stringliteral">&quot;left &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      &lt;&lt; (isNoAdjust ? <span class="stringliteral">&quot;no adjust &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      &lt;&lt; (isRightJustify ? <span class="stringliteral">&quot;right &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      &lt;&lt; (isInternalJustify ? <span class="stringliteral">&quot;int &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      &lt;&lt; (isShowPos ? <span class="stringliteral">&quot;show_+ &quot;</span> : <span class="stringliteral">&quot;&quot;</span> )</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      &lt;&lt; (isShowPoint ? <span class="stringliteral">&quot;show . &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      &lt;&lt; (isValueZero ? <span class="stringliteral">&quot;isValueZero &quot;</span> : <span class="stringliteral">&quot;&quot;</span> )</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      &lt;&lt; (isValueExact ? <span class="stringliteral">&quot;isValueExact &quot;</span> : <span class="stringliteral">&quot;&quot;</span> )</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      &lt;&lt; (isValueInteger ? <span class="stringliteral">&quot;isValueInteger &quot;</span> : <span class="stringliteral">&quot;&quot;</span> )</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      &lt;&lt; (isValueNegative ? <span class="stringliteral">&quot;isValueNegative &quot;</span> : <span class="stringliteral">&quot;&quot;</span> )</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      &lt;&lt; (isValueInfinite? <span class="stringliteral">&quot;isValueInfinite &quot;</span> : <span class="stringliteral">&quot;&quot;</span> )</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      &lt;&lt; (isValueNaN ? <span class="stringliteral">&quot;isValueNaN &quot;</span> : <span class="stringliteral">&quot;&quot;</span> )</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      &lt;&lt; (isStdDevNaN ? <span class="stringliteral">&quot;isStdDevNaN &quot;</span> : <span class="stringliteral">&quot;&quot;</span> )</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      &lt;&lt; (isValueTooBigforSI ? <span class="stringliteral">&quot;Too_big for_SI &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      &lt;&lt; (isValueTooBigforUnc ? <span class="stringliteral">&quot;Too_big_for_unc &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      &lt;&lt; (isUncKnown ? <span class="stringliteral">&quot;isUncKnown &quot;</span> : <span class="stringliteral">&quot;uncUnknown&quot;</span> )</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      &lt;&lt; std::endl;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  } <span class="comment">// trace</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="preprocessor"></span>  <span class="comment">// Scale the value, if required by unc flags setScaled or autoScaled. _______________________________________________</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// 0 == scale10 means (not)scaled by unity. 3 means divided by 1000 ...</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">if</span> (!isValueInteger &amp;&amp; !isValueZero &amp;&amp; !isValueInfinite &amp;&amp; !isValueNaN)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  { <span class="comment">// autoscaled or set scaled.</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// but NOT isValueInteger, so means output 10000 m not 10.000 km,</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// nor zero because pointless.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="preprocessor">#ifdef UNC_TRACE</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor"></span>    {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      std::cerr &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> <span class="stringliteral">&quot;Value &quot;</span> &lt;&lt; setprecision(18) &lt;&lt; value &lt;&lt; (isValueNearZero ? <span class="stringliteral">&quot;isValueNearZero &quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    } <span class="comment">// if (trace)</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="preprocessor"></span>  } <span class="comment">// if (isScaled &amp;&amp; !isValueInteger)</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// ScaledValue is in range OK, exponent == 0</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// so find power of ten of ms digit, 9 = 10 ^ 0, 90 = 10 ^ 2</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="comment">// int stdDevExponent = 0;  // If value is d.d, then exponent = 0.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="comment">// Calculate how many significant digits for value, and then for stdDev. ///////////////////////////////////////////////</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="comment">// Or, if requested, use the set values.</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">// int sigDigits; // Significant digits for value,</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="comment">// for example: 3 means ddd0. or ddd. or dd.d or d.dd or d.dd or 0.ddd or 0.0ddd ...</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">// For zero, sigDigits = 1 means just 0, 2 means 0.0, 3 means 0.00 ...</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">// int stdDevSigDigits;  // Significant digits for stdDev.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">if</span> (isValueInteger)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  { <span class="comment">// Integer 9876</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    stdDevSigDigits = 0; <span class="comment">// No uncertainty known!</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">// But even if &lt;&lt; plusminus, do NOT output &quot;9 +/- 0&quot; for an integer.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">// Do output decimal point if requested by showpoint</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">// Do we want to scale integers if requested by &lt;&lt; setscale?  TODO</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    sigDigits = exponent + 1; <span class="comment">// So for integers 1 to 9: exponent = 0 &amp; sigDigits = 1,</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">//                              for integers 10 to 19, exponent = 1, sigDigits = 2 ...</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    isPlusMinus = <span class="keyword">false</span>; <span class="comment">// Never show &quot;2 +/-0&quot; for integer value 2.</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="comment">// (even if requested with out &lt;&lt; plusminus &lt;&lt; integer ... !).</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  } <span class="comment">// isValueInteger.</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isValueExact)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  { <span class="comment">// Show full precision, but no trailing zeros, so get &quot;2.54&quot; not &quot;2.5400000000000&quot;</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    sigDigits = 1;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="comment">// sigDigits = numeric_limits&lt;double&gt;::digits10; // Typically 15 digits are guaranteed.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="comment">// (Although max_digits10 are perhaps significant.</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="comment">// Show &quot;+/-0&quot; if requested for real exact for example: &quot;2.54 +/-0&quot;</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">// (unlike NOT for integer).</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    stdDevSigDigits = 0; <span class="comment">// &quot;+/-0&quot; not &quot;+/-0.&quot;, &quot;+/-0.0&quot;, &quot;+/-0.1&quot; ...</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    exponent = 0;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  } <span class="comment">// isValueExact.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isUncKnown)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  { <span class="comment">// Uncertainty NOT known.</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">// isPlusMinus = false; // Don&#39;t attempt to show +/-?  Better to show &quot;+/- ?&quot;</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    stdDevSigDigits = <a class="code" href="si__units_8hpp.html#a81bf85f628cebd9a5de9f91acade1c0b">notOK</a>; <span class="comment">// In case we try to show uncertainty.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">// This leads to default switch showing max_digits10 and a warning</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="comment">// &quot;Unexpected .... &quot;</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// Not the best choice perhaps?</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">// sigDigits = iosPrecision;   // Use current stream precision (default 6).</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// sigDigits = max_digits10;   // Use max stream precision (17) or digits10?</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  } <span class="comment">// uncertainty unknown.</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordflow">else</span>  </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  { <span class="comment">// Uncertainty IS known so calculate from standard deviation</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// the number of significant digits sigDigits to use for value.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">//if (unitsScaledValue != 0.)</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="comment">// From table H page 457 in Oliver &amp; Goldsmith, confidence interval</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">// of standard deviation is about +/- 20% at 10 degrees of freedom,</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="comment">// and only &lt; +/- 10% above 100 observations (needing 2 stdDev sig Digits).</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  } <span class="comment">// Normal uncertain real cases.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="comment">// Inexact and known uncertainty (including 0.0000 +/- 0.00019 case).</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="preprocessor">#ifdef UNC_TRACE</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="preprocessor"></span>  { <span class="comment">// scaling.</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    std::cerr &lt;&lt; std::setprecision(sigDigits+2) &lt;&lt; dec</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;  &quot;</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;, sigDigits &quot;</span> &lt;&lt; sigDigits</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;, stdDevSigDigits &quot;</span> &lt;&lt; stdDevSigDigits</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;, setSigDigits &quot;</span> &lt;&lt; setSigDigits <span class="comment">// but not necessarily used.</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;, setStdDevSigDigits &quot;</span> &lt;&lt; setStdDevSigDigits <span class="comment">// but not necessarily used.</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      &lt;&lt; std::endl;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  } <span class="comment">// trace</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> signChar = (isValueNegative) ? <span class="charliteral">&#39;-&#39;</span>: <span class="comment">// Always show &#39;-&#39; sign.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  (isShowPos ? <span class="charliteral">&#39;+&#39;</span> :  <span class="comment">// show &#39;+&#39; only if isShowPos.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="comment">//(isWidthSet ? &#39; &#39; : 0 ) ); // space where sign char would be only for isWidthSet.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  (isWidthSet ? 0 : 0 ) ); <span class="comment">// zero where sign char would be only for isWidthSet.</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// Save previous before actually output anything, so can restore on exit.</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  os.iword(<a class="code" href="unc__init_8hpp.html#a9acb4d575400649788f528362c1b9b81">oldSigDigitsIndex</a>) = os.iword(<a class="code" href="unc__init_8hpp.html#afe554f1b530ecba143767f8fdd033560">sigDigitsIndex</a>);  <span class="comment">// Save previous sigDigitsIndex.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  os.iword(<a class="code" href="unc__init_8hpp.html#afe554f1b530ecba143767f8fdd033560">sigDigitsIndex</a>) = sigDigits;  <span class="comment">// Save or &#39;return&#39; sigDigits used next.</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="comment">// ###################  Actually Output value (append +/- if isPlusMinus). ####################################</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="preprocessor">#ifdef UNC_TRACE</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="preprocessor"></span>  {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    std::cerr &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> <span class="stringliteral">&quot; ios Width &quot;</span> &lt;&lt; iosWidth</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;, ios fill char &quot;</span> &lt;&lt; showbase &lt;&lt; hex &lt;&lt; int(iosFillChar) &lt;&lt; dec</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      &lt;&lt; (isprint(iosFillChar) ? iosFillChar : <span class="stringliteral">&#39;  &#39;</span>)</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;, signChar (&quot;</span> &lt;&lt; showbase &lt;&lt; hex &lt;&lt; <span class="keywordtype">int</span>(signChar) &lt;&lt; dec &lt;&lt; noshowbase &lt;&lt; <span class="stringliteral">&quot;) &quot;</span> &lt;&lt; ((signChar != 0) ? signChar : <span class="charliteral">&#39; &#39;</span>)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      &lt;&lt; std::endl;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  } <span class="comment">// trace</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  std::ostringstream oss; <span class="comment">// Value etc string to really output, with pre &amp; /or after padding, if necessary.</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordtype">bool</span> beenPointed = <span class="keyword">false</span>; <span class="comment">// Decimal point has not been output yet.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="comment">// Might use this later for alignment of table the decimal points.</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">if</span> (isValueInfinite)</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    oss &lt;&lt; ((isValueNegative) ? <span class="stringliteral">&quot;-infinity&quot;</span> : <span class="stringliteral">&quot;+infinity&quot;</span>);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(isValueNaN)</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    oss &lt;&lt; <span class="stringliteral">&quot;NaN&quot;</span>; <span class="comment">// &quot;NaN&quot;</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">// round here.</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  os &lt;&lt; oss.str(); <span class="comment">// &quot;1.23 +/- 0.1 (9) mV&quot;</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  used = oss.str().size();</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="preprocessor">#ifdef UNC_TRACE</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="preprocessor"></span>  {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    std::cerr &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; dec &lt;&lt; used &lt;&lt; <span class="stringliteral">&quot; chars used in total.&quot;</span>  &lt;&lt; std::endl;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  } <span class="comment">// trace</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  os.iword(<a class="code" href="unc__init_8hpp.html#ad618eda6e95462f32dea23b4bb3e80ac">oldUncUsedIndex</a>) = os.iword(<a class="code" href="unc__init_8hpp.html#a2de43181282875cbc2388862245f9266">usedIndex</a>); <span class="comment">// Save previous used.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  os.iword(<a class="code" href="unc__init_8hpp.html#a2de43181282875cbc2388862245f9266">usedIndex</a>) = <span class="keyword">static_cast&lt;</span><span class="keywordtype">long</span><span class="keyword">&gt;</span>(used);  <span class="comment">// Record chars actually output to os.</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">// This may be needed to calculate layout of a table,</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// Std behaviour is to return to default width.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="comment">// Field width reverts to its default behavior, width = 0</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="comment">// (the necessary width) after one field has been printed,</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// so must be last item before a &#39;;&#39; to be read.  Not ideal!!</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">// os.width = savedWidth; // Restoring width is pointless.</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  os.flags(iosFlags);  <span class="comment">// Restore ios flags.</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;} <span class="comment">// void unc_output(double value, float stdDev,</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">// unsigned short int degFree, unsigned short int uncTypes, ostream&amp; os);</span></div>
</div><!-- fragment --></div><!-- contents -->
<!-- custom Doxygen footer quan_doxygen_footer.html  -->-
<!-- Copyright 2012 Paul A. Bristow -->
<!-- Distributed under the Boost Software License, Version 1.0. -->
<!-- (See accompanying file LICENSE_1_0.txt or copy at          -->
<!-- http://www.boost.org/LICENSE_1_0.txt)                      -->
<hr size="1"/>
<table width="100%">
<tbody>
  <tr>
   <address style="text-align: left;">
     <p>Use, modification and distribution are subject to the Boost Software License, Version 1.0.<br/>
     (See accompanying file LICENSE_1_0.txt or copy at&nbsp;
     <a href="http://www.boost.org/LICENSE_1_0.txt"> http://www.boost.org/LICENSE_1_0.txt </a>)</p>
      <!-- Change copyright to YOUR name (and affiliation, if any) below:  -->
     <p>Copyright  2012 Paul A. Bristow</p>
      <!-- 2012 becomes the current year, for example 2010, so claims copyright for a range of years, 2009 - 2010. -->
     <p>Doxygen Documentation generated by&nbsp;<a href="http://www.doxygen.org/index.html"> <img src="doxygen.png" alt="doxygen logo" align="middle" border="0"/> 1.8.2</a>, Revised at Wed Aug 29 2012 16:29:25</p>
  </address>
  </tr>
</tbody>
</table>
  <!-- You can also add a footer logo, taking care that the location of the footer.png is correct. -->
  <!-- <img src="../images/my_footer.png" alt="Boost Doxygen documentation footer.png" -->
  </body> <!-- <body> is in doxygen_header.html -->
</html><!-- <html>  is in doxygen_header.html -->
